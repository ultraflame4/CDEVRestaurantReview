import{d as N,p as i,u as C,r as c,U as H,e as M,j as e,f as S,a as n,S as $,C as P,I as l,b as k,g as W,F as L,h as j,s as d,i as y}from"./index.2c58c893.js";import{W as A,P as U,R as B}from"./ReviewsList.6e0673e4.js";const F="_main_bfp0o_3",G="_otherInfo_bfp0o_69",T="_restaurantDesc_bfp0o_107",q="_reviewsHeader_bfp0o_121",E="_icon_bfp0o_131",O="_photos_bfp0o_201",z="_restaurantInfoItem_bfp0o_365",o={main:F,otherInfo:G,restaurantDesc:T,reviewsHeader:q,icon:E,photos:O,restaurantInfoItem:z},h=a=>a.hide?e(L,{}):n("div",{className:o.restaurantInfoItem,children:[e(l,{icon:a.icon,className:o.icon}),e("h3",{children:a.title}),e("p",{children:a.children})]});h.propTypes={children:i.exports.node,icon:i.exports.string.isRequired,title:i.exports.string.isRequired,hide:i.exports.bool};const Q=N(a=>{var p,m,_,f;const w=C(),r=parseInt(w.id),[t,I]=c.exports.useState(null),[b,u]=c.exports.useState(!1),R=c.exports.useContext(H);async function x(s){let g=await j(r,s),v=!1;return g.length===0&&(v=!0),{reviews:g,allShown:v}}if(c.exports.useEffect(()=>{document.title="RestauRants - Loading...",M(r).then(s=>{setTimeout(()=>{document.title=`RestauRants - ${s.name}`},0),I(s)})},[r]),t===null)return e("div",{children:e(S,{})});function D(){if(R===null){d("signin").then(s=>y.isLoggedIn.value?d("write-review"):Promise.reject("Cannot show write review modal. User is not logged in.")).catch(s=>{console.error(s)});return}d("write-review")}return e("div",{children:n("main",{className:o.main,children:[e(A,{restaurantId:r}),((p=t.photo_url)==null?void 0:p.length)>2&&e(U,{isOpen:b,pictures:t.photo_url,onClose:()=>u(!1)}),n("div",{children:[e("h1",{children:t.name}),e($,{rating:parseFloat(t.avg_rating)}),n("div",{className:o.otherInfo,children:[e(P,{rating:t.cost_rating/2}),e(l,{icon:"ci:dot-03-m"}),n("span",{children:[Math.round(t.distance/10)/100,"km"]})]}),e("h2",{children:"Description"}),e("p",{className:o.restaurantDesc,children:e(k,{text:t.description,sep:"<br>"})}),n("div",{className:o.reviewsHeader,children:[e("h2",{children:"Reviews"})," ",e(l,{icon:"ic:baseline-chat",className:o.icon}),n("button",{onClick:D,children:["Write a review ",e(l,{icon:"ic:baseline-edit",className:o.icon})]})]}),e(B,{loadMore:x})]}),n("div",{children:[n("div",{className:o.photos,children:[((m=t.photo_url)==null?void 0:m.length)>0&&e("img",{src:t.photo_url[0],alt:"An image of the restaurant"}),((_=t.photo_url)==null?void 0:_.length)>1&&e("img",{src:t.photo_url[1],alt:"An image of the restaurant"}),((f=t.photo_url)==null?void 0:f.length)>2&&n("button",{onClick:()=>u(!0),children:[e("img",{src:t.photo_url[2],alt:"An image of the restaurant"}),n("p",{children:["See all ",t.photo_url.length]})]})]}),n("aside",{className:"card",children:[e(h,{icon:"mdi:link-variant",title:"Website",hide:!t.website,children:e("a",{href:t.website,target:"_blank",children:t.website})}),e(h,{icon:"ic:baseline-local-phone",title:"Phone number",hide:!t.phone_no,children:t.phone_no}),e(h,{icon:"ic:directions",title:"Location",hide:!t.location,children:t.location})]}),e("iframe",{frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0",className:"card",src:W(t.name,t.location)})]})]})})});export{Q as default};
